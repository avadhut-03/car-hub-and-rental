(window.webpackJsonp=window.webpackJsonp||[]).push([[47,0],{115:function(e,t,o){},117:function(e,t,o){"use strict";o.r(t);o(115);var n={name:"modal",props:["title","img","stamp","msg","actions"],data:function(){return{}},computed:{},methods:{closeDialog:function(){this.$emit("onClose")},handleDialogClose:function(e){27==e.keyCode&&this.closeDialog()}},created:function(){document.addEventListener("keydown",this.handleDialogClose)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleDialogClose)}},i=o(13),r=Object(i.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal"},[o("div",{staticClass:"modal-wrap"},[e.img?o("img",{staticClass:"modal-img",attrs:{src:e.img}}):e._e(),e._v(" "),e.stamp?o("div",{staticClass:"modal-stamp"},[e._v(e._s(e.stamp))]):e._e(),e._v(" "),e.title?o("h2",[e._v(e._s(e.title))]):e._t("modal-title"),e._v(" "),e.msg?o("div",{staticClass:"wrap content"},[o("p",{domProps:{innerHTML:e._s(e.msg)}})]):e._t("default"),e._v(" "),e.actions?o("div",{staticClass:"actions"},e._l(e.actions,(function(t,n){return o("button",{key:"action-"+n,class:{primary:t.primary,blue:t.secondary},on:{click:t.method}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),0):e._t("modal-actions")],2),e._v(" "),o("div",{staticClass:"modal-ovl",on:{click:function(t){return t.preventDefault(),e.closeDialog.apply(null,arguments)}}})])}),[],!1,null,null,null).exports;t.default=r},292:function(e,t,o){"use strict";function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return a}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=sessionStorage.getItem("gtm");t&&(t=JSON.parse(t)),sessionStorage.setItem("gtm",JSON.stringify(i(i({},t),e)))}},424:function(e,t,o){},433:function(e,t,o){var n={"./bg.png":434,"./change-password-icon.png":435,"./facebook-logo.png":436,"./facebook-logo.svg":289,"./google-logo.png":437,"./google-logo.svg":290,"./india-flag.svg":438,"./loader.gif":439,"./login-banner.svg":440,"./logo-tml-black.svg":441,"./logo-tml.svg":442,"./logo-zap.svg":443,"./mail-icon-with-bg.png":444,"./mail-icon.png":445,"./next-icon.svg":446,"./otp-icon.png":447,"./paytm.png":291,"./pedlBlackLogo.png":448,"./phone-icon-with-bg.png":449,"./promo-1.png":311,"./promo-2.png":450,"./promo-3.png":313,"./promo_supermiler.svg":312,"./signup-success-with-bg.png":451,"./tml-next-icon.svg":452,"./zoom-logo-color.png":453};function i(e){var t=r(e);return o(t)}function r(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=433},796:function(e,t,o){"use strict";o.r(t);o(424);var n=o(9),i=o(425),r=o.n(i),a=o(117),s=o(2),l=o(12),c=o(18);function g(){var e=this.$store.state,t=e.User,o=e.Search;return{get onPageLoad(){return{Category:"page",Category_ID:"login_page",Location:o.origin.name,context_traits_user_id:t.info.user_id,context_traits_phone:t.info.phone,context_traits_email:t.info.email,City:t.currentCity.link_name}}}}var u=o(0),p=o(292);function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m={name:"page-login",components:{Login:r.a,Modal:a.default},data:function(){return{loginProps:{isBookingFlow:!1,facebookId:"194504380711275",googleId:"830554454051-huid8m9n07cbvaggvdgqs0dvhmccdcr3.apps.googleusercontent.com",isPaytmFlow:!1,is_wallet_tried:!1,show:!0},pageDialog:{},hideSocialLogin:!1}},created:function(){var e=window.navigator.standalone,t=window.navigator.userAgent.toLowerCase(),o=/safari/.test(t);!/iphone|ipod|ipad/.test(t)||e||o||(this.hideSocialLogin=!0),this.$route.query["booking-flow"]?this.authToken&&this.wallet.is_wallet_connected||(this.loginProps.isBookingFlow=!0):this.$route.query["link-wallet"]&&(this.loginProps.isPaytmFlow=!0),(this.$route.query.platform&&"mobileapp"==this.$route.query.platform||this.$route.query&&this.$route.query.is_webview)&&(this.hideSocialLogin=!0);var n=c.a.partner,i=n&&n.config.layout.hideSocialLogin;this.loginProps.isNativeApp=i,this.loginProps.is_wallet_tried=!!this.wallet&&this.wallet.is_wallet_tried},computed:h(h(h({},Object(n.mapState)("App",["locale"])),Object(n.mapGetters)({authToken:"User/authToken",wallet:"User/wallet",countryCode:"App/countryCode"})),{},{isLoggedIn:function(){return this.$store.state.User.info.user_id},segment:function(){return g.call(this)}}),methods:h(h({},Object(n.mapActions)({fetchAddress:"User/fetchAddress",fetchConfig:"User/fetchConfig",fetchZpoints:"User/fetchZpoints"})),{},{handleLogin:function(){var e,t,o=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.user?(e=h(h({},n),n.user),t=n):(e=this.$store.state.User.info,t=n.wallet),!e||!e.auth_token)return this.pageDialog={show:!0,msg:"Login failed, please try again.",actions:[{primary:!0,method:function(){return o.pageDialog={}},label:"ok"}]};Object(p.a)({userType:e.isLoginFlow?"RTU":"FTU"}),u.a.create("authToken",e.auth_token),s.a.setItem("auth_token",e.auth_token),s.a.setItem("refresh_token",e.refresh_token),s.a.setItem("access_token",e.access_token),this.$store.commit("User/setUser",e),this.$store.commit("User/setWallet",t),this.fetchAddress(),this.fetchZpoints(),"CheckoutPage"===this.$route.query.page||"CarDetailPage"===this.$route.query.page?this.$router.push({name:"CarDetailPage",params:{city_link:u.a.read("city"),country_code:u.a.read("countryCode"),car_id:this.$route.query.car_id},query:{location_id:this.$route.query.location_id}}):Object(l.g)(this.$route.query.n)},handleCallback:function(){var e=this;Promise.all([this.fetchAddress(),this.fetchZpoints()]).finally((function(){"CheckoutPage"===e.$route.query.page||"CarDetailPage"===e.$route.query.page||Object(l.g)(e.$route.query.n)}))}})},y=o(13),b=Object(y.a)(m,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page page-login"},[e.loginProps.show?[o("Login",e._b({attrs:{hideSocialLogin:e.hideSocialLogin,language:e.locale,country:e.countryCode,source:"guest"},on:{loggedIn:e.handleLogin,runCallback:e.handleCallback}},"Login",e.loginProps,!1))]:e._e(),e._v(" "),e.pageDialog.show?o("modal",e._b({},"modal",e.pageDialog,!1)):e._e()],2)}),[],!1,null,null,null).exports;t.default=b}}]);